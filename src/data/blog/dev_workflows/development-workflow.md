---
title: "Development Workflow"
tags:
  - dev-notes
date_created: 2026-01-11
author: Pascal Andy
description: "Commands and workflow for developing, testing, and building the blog"
---

# Development Workflow

> Quick reference for all development commands.

## Daily Development

```bash
# Start dev server (hot reload)
bun run lint && bun run format | tspin && bun run build | tspin && bun run dev | tspin

# Preview production build locally
bun run preview
```

## Quality Checks

Run these before committing:

```bash
# Type checking (Astro + TypeScript)
bun astro check

# Linting (ESLint)
bun run lint

# Format check (Prettier)
bun run format:check
# stop on error

# Auto-format all files
bun run format | tspin
```

## Production Build

```bash
# Full build pipeline
bun run build
```

This runs:

1. `astro check` — TypeScript validation
2. `astro build` — Generate static site in `dist/`
3. `pagefind --site dist` — Build search index
4. `cp -r dist/pagefind public/` — Copy search index to public

## Sync Content Collections

```bash
# Regenerate TypeScript types for content
bun run sync
```

Use after modifying `src/content.config.ts` or adding new content fields.

## Command Summary

| Command                | Purpose                          |
| ---------------------- | -------------------------------- |
| `bun run dev`          | Start dev server with hot reload |
| `bun run build`        | Full production build            |
| `bun run preview`      | Preview production build         |
| `bun run sync`         | Sync content collection types    |
| `bun astro check`      | TypeScript type checking         |
| `bun run lint`         | ESLint code linting              |
| `bun run format`       | Auto-format with Prettier        |
| `bun run format:check` | Check formatting without changes |

## Git Hooks (Automated Quality Checks)

Git hooks are configured via [Lefthook](https://github.com/evilmartians/lefthook) to automatically run quality checks.

### Pre-commit (runs on every commit)

1. `bun run format:check` — Verify formatting
2. `bun run lint` — Check for linting errors

### Pre-push (runs before pushing)

1. `bun astro check` — TypeScript validation
2. `bun run build` — Full production build

### Setup

Hooks are installed automatically when you run `bun install` (via the `prepare` script). To manually reinstall:

```bash
bunx lefthook install
```

### Bypassing Hooks (use sparingly)

```bash
# Skip pre-commit hooks
git commit --no-verify -m "message"

# Skip pre-push hooks
git push --no-verify
```

## Notes

- Dev server runs on port **4321** by default
- Build output goes to `dist/` directory
- Search index is generated by Pagefind during build
- The `public/` folder contents are copied as-is to `dist/`
